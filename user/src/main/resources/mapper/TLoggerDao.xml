<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "./mybatis-3-mapper.dtd">
<mapper namespace="cn.kcs.user.dao.TLoggerDao">

    <resultMap type="cn.kcs.user.entity.TLogger" id="TLoggerMap">
        <result property="logId" column="log_id" jdbcType="VARCHAR"/>
        <result property="logAccessUserId" column="log_access_user_id" jdbcType="VARCHAR"/>
        <result property="logAccessUserName" column="log_access_user_name" jdbcType="VARCHAR"/>
        <result property="logAccessType" column="log_access_type" jdbcType="VARCHAR"/>
        <result property="logAccessUrl" column="log_access_url" jdbcType="VARCHAR"/>
        <result property="logAccessIp" column="log_access_ip" jdbcType="VARCHAR"/>
        <result property="logAccessTime" column="log_access_time" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="TLoggerMap">
        select
        log_id, log_access_user_id, log_access_user_name, log_access_type, log_access_url, log_access_ip,
        log_access_time
        from myproject.t_logger
        where log_id = #{logId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="TLoggerMap">
        select
        log_id, log_access_user_id, log_access_user_name, log_access_type, log_access_url, log_access_ip,
        log_access_time
        from myproject.t_logger
        <where>
            <if test="loggerDto.logId != null and loggerDto.logId != ''">
                and log_id = #{loggerDto.logId}
            </if>
            <if test="loggerDto.logAccessUserId != null and loggerDto.logAccessUserId != ''">
                and log_access_user_id = #{loggerDto.logAccessUserId}
            </if>
            <if test="loggerDto.logAccessUserName != null and loggerDto.logAccessUserName != ''">
                and log_access_user_name = #{loggerDto.logAccessUserName}
            </if>
            <if test="loggerDto.logAccessType != null and loggerDto.logAccessType != ''">
                and log_access_type = #{loggerDto.logAccessType}
            </if>
            <if test="loggerDto.logAccessUrl != null and loggerDto.logAccessUrl != ''">
                and log_access_url = #{loggerDto.logAccessUrl}
            </if>
            <if test="loggerDto.logAccessIp != null and loggerDto.logAccessIp != ''">
                and log_access_ip = #{loggerDto.logAccessIp}
            </if>
            <if test="loggerDto.logAccessTime != null">
                and log_access_time = #{loggerDto.logAccessTime}
            </if>
        </where>
        ORDER BY log_access_time DESC
        LIMIT #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="TLoggerMap">
        select
        log_id, log_access_user_id, log_access_user_name, log_access_type, log_access_url, log_access_ip,
        log_access_time
        from myproject.t_logger
        <where>
            <if test="logId != null and logId != ''">
                and log_id = #{logId}
            </if>
            <if test="logAccessUserId != null and logAccessUserId != ''">
                and log_access_user_id = #{logAccessUserId}
            </if>
            <if test="logAccessUserName != null and logAccessUserName != ''">
                and log_access_user_name = #{logAccessUserName}
            </if>
            <if test="logAccessType != null and logAccessType != ''">
                and log_access_type = #{logAccessType}
            </if>
            <if test="logAccessUrl != null and logAccessUrl != ''">
                and log_access_url = #{logAccessUrl}
            </if>
            <if test="logAccessIp != null and logAccessIp != ''">
                and log_access_ip = #{logAccessIp}
            </if>
            <if test="logAccessTime != null">
                and log_access_time = #{logAccessTime}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="logId" useGeneratedKeys="true">
        insert into myproject.t_logger(log_id, log_access_user_id, log_access_user_name, log_access_type,
        log_access_url, log_access_ip, log_access_time)
        values (#{logId}, #{logAccessUserId}, #{logAccessUserName}, #{logAccessType}, #{logAccessUrl}, #{logAccessIp},
        #{logAccessTime})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update myproject.t_logger
        <set>
            <if test="logAccessUserId != null and logAccessUserId != ''">
                log_access_user_id = #{logAccessUserId},
            </if>
            <if test="logAccessUserName != null and logAccessUserName != ''">
                log_access_user_name = #{logAccessUserName},
            </if>
            <if test="logAccessType != null and logAccessType != ''">
                log_access_type = #{logAccessType},
            </if>
            <if test="logAccessUrl != null and logAccessUrl != ''">
                log_access_url = #{logAccessUrl},
            </if>
            <if test="logAccessIp != null and logAccessIp != ''">
                log_access_ip = #{logAccessIp},
            </if>
            <if test="logAccessTime != null">
                log_access_time = #{logAccessTime},
            </if>
        </set>
        where log_id = #{logId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from myproject.t_logger where log_id = #{logId}
    </delete>

</mapper>